<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<link rel="stylesheet"  href="mainstyle.css">
<title>流星の如く駆けよハム</title>
</head>

<body>
    <div id = "wakuwaku"><img src = "image/waku.png"></div>
    <div id = "kassya">
        <img id = ka src = "image/kassya1.png" onmouseover = "trigger()"; onmouseout = "triggerout();">
    </div> 
    <br><br><br>
    <!-- <p id="Xzahyou">Ｘ座標：</p> -->
    <!-- <p id="Yzahyou">Ｙ座標：</p> -->
    <p id="move"> movementX:</p>
    <p id="scroll"> deltaX:</p>


<script>
    console.log("コンソールです");
    (function (){//ハムの動作
        const hamuimg = [];
        hamuimg[0] = "image/front.png"; 
        hamuimg[1] = "image/left1.png";
        hamuimg[2] = "image/left2.png";
        hamuimg[3] = "image/right1.png";
        hamuimg[4] = "image/right2.png";
        var hamunumber = 0;
        var hamuselecter = hamuimg[hamunumber];

        function hamuChengerLeft(){hamunumber = 1;}
        function hamuChengerRight(){hamunumber = 3;}
        function hamuChengerStatic(){hamunumber = 0;}

        document.onmousemove=function (e){ 
            var ob=document.getElementById("Mo").style;
            ob.left=e.pageX +-80 + "px";
            ob.top=e.pageY + 20 + "px";
            let pX = e.pageX;
            let pY = e.pageY;
            var shiftX = e.movementX; 
            //debugZahyouGetter( pX, pY );//最後に消す
            document.getElementById( "move" ).innerHTML = "movementX：" + shiftX;//消す
            if(shiftX < 0){hamuChengerLeft();}
            else if(shiftX > 0){hamuChengerRight();}
            else{hamuChengerStatic();}
            hamuChengerLeft();
        }
        document.write("<img src="+hamuselecter+" id='Mo' style='position:absolute;'>");//ここHTMLとcss書いてる
    }());
    /*function debugZahyouGetter( $arg1, $arg2 ) {//最後に消す
        document.getElementById( "Xzahyou" ).innerHTML = "Ｘ座標：" + $arg1;
        document.getElementById( "Yzahyou" ).innerHTML = "Ｙ座標：" + $arg2;  
    }*/
    function trigger(){
            console.log("trigger動いてます");
        }

    function triggerout(){
        console.log("triggerout動いてます")
    }
   
    var element = document.getElementById( "ka" ) ;
    var callbackFn =  function ( event ) {
	    event.preventDefault() ;
        delX = event.deltaX
    	resultElement.innerHTML = "" ;
    	resultElement.appendChild( new Text( "deltaX: " + delX+ "\n" ) ) ;
        //console.log("deltaXを読み取るfunctionです");
        function kassyaRolling(){
            //console.log("function kassyaRolling()は動いています");
            let imgIndex = 0;
            const imgPaths = ["image/kassya1.png","image/kassya2.png"];
            function changeImage() {
            const img = document.getElementById('ka');
            imgIndex = (imgIndex + 1) % 2;
            img.src = imgPaths[imgIndex];
}

setInterval(changeImage, 100);

        }
        if(delX > 0){ kassyaRolling(); }
        else{
            document.getElementById("ka").src = "image/kassya1.png"
        }
    } ;
    element.addEventListener( "wheel", callbackFn ) 
    var resultElement = document.getElementById( "scroll" ) ;



</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</body>

</html>    